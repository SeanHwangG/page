{% extends "base.html" %}
{% block body %}
<div class="side">
  <div class="side-item side-search">
    <input type="text" placeholder="Search">
  </div>
  <hr>
  {% for h1, h1_contents in headers[cur_doc_id].items() %}
  <a class="side-item side-h1" href="/page/{{cur_doc_id}}/{{h1}}">{{h1}}</a>
  {% if h1 == cur_h1 %}
  {% for h2, h3s in headers[cur_doc_id][h1].items() %}
  {% set outer_loop = loop %}
  <a class="side-item side-h2" href="/page/{{cur_doc_id}}/{{h1}}/{{h2}}">
    <b>{{outer_loop.index}}. </b>{{h2}}</a>
  {% for h3 in h3s %}
  <a class="side-item side-h3" href="/page/{{cur_doc_id}}/{{h1}}/{{h2}}/{{h3}}">
    <b>{{outer_loop.index}}.{{loop.index}}. </b>{{h3}}</a>
  {% endfor %}
  {% endfor %}
  {% endif %}
  {% endfor %}
</div>
<div class="content">
  <div class="content-login">
    {% if current_user and current_user.id %}
    <p style="display:inline">Hi {{ current_user.id }} </p>
    <a class="content-login-link" href="/signout">Sign out</a>
    {% if current_user.class_id == "" %}
    <a class="content-login-link" href="/premium">Premium</a>
    {% endif %}
    {% else %}
    <a class="content-login-link" href="{{ url_for('signin') }}">Sign in</a>
    {% endif %}
  </div>
  <div class="content-head">
    {% for doc_id in headers %}
    {% if doc_id != cur_doc_id %}
    <a class="content-head-doc_id" href="/page/{{doc_id}}">{{doc_id}}</a>
    {% else %}
    <a class="content-head-doc_id current" href="/page/{{doc_id}}">{{doc_id}}</a>
    {% endif %}
    {% endfor %}
  </div>
  <div class="content-body">
    {% for content in contents %}
    <h2> {{ content["li"] }} </h2>
    {% for p in content["ps"] %}
    <p>{{ p | safe }}</p>
    {% endfor %}

    {% for g in content["gists"] %}
    {{ display_gist(g) | safe }}
    {% endfor %}

    {% endfor %}
  </div>
</div>
{% endblock body %}