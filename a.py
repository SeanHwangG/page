import django
django.setup()
import traceback
from django.core.management import call_command
from user.models import User, Membership, Team
from problem.models import Account, Site
users = [{"model": "user.team", "pk": "prake", "fields": {"created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.801Z"}},
         {"model": "user.user", "pk": "a01037285112", "fields": {"BJ_id": "a01037285112", "name": "김준영", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}},
         {"model": "user.user", "pk": "channy1030", "fields": {"BJ_id": "channy1030", "name": "김경찬", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}},
         {"model": "user.user", "pk": "dpffkghdi07", "fields": {"BJ_id": "dpffkghdi07", "name": "여해성", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}},
         {"model": "user.user", "pk": "hockey89", "fields": {"BJ_id": "hockey89", "name": "이승준", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}},
         {"model": "user.user", "pk": "hoonie0911", "fields": {"BJ_id": "hoonie0911", "name": "송정훈", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}}, {"model": "user.user", "pk": "insel0514", "fields": {"BJ_id": "insel0514", "name": "정인슬", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}}, {"model": "user.user", "pk": "jaekigs", "fields": {"BJ_id": "jaekigs", "name": "조재영", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}}, {"model": "user.user", "pk": "jeus0609", "fields": {"BJ_id": "jeus0609", "name": "조재욱", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}}, {"model": "user.user", "pk": "molla", "fields":
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          {"BJ_id": "molla", "name": "서승연", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}}, {"model": "user.user", "pk": "party07", "fields": {"BJ_id": "party07", "name": "김민성", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}}, {"model": "user.user", "pk": "rbtmd1010", "fields": {"BJ_id": "rbtmd1010", "name": "황규승", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}}, {"model": "user.user", "pk": "skyorms2", "fields": {"BJ_id": "skyorms2", "name": "김민소", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}}, {"model": "user.user", "pk": "smj91011", "fields": {"BJ_id": "smj91011", "name": "손명재", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}},
         {"model": "user.user", "pk": "wjdtndls0416", "fields": {"BJ_id": "wjdtndls0416", "name": "정수인", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.805Z"}},
         {"model": "user.membership", "pk": "0ee2d48d-fddc-441b-8ee1-eb4af024c589", "fields": {"membership_type": "member", "team": "prake", "user": "jeus0609", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "19910736-a9b3-455e-b35c-6898fc0cc952", "fields": {"membership_type": "member", "team": "prake",
                                                                                                                                                                                                                                                                                                                                          "user": "a01037285112", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}},
         {"model": "user.membership", "pk": "1b5be25f-71d0-44c7-a537-5f0f47a4119b", "fields": {"membership_type": "member", "team": "prake", "user": "dpffkghdi07", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "248b7914-f241-4560-bffd-c36bb7533b50", "fields": {"membership_type": "member", "team": "prake", "user": "hoonie0911", "created_at": "2021-04-01T00:00:00Z",
                                                                                                                                                                                                                                                                                                                                             "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "2ef72f31-4782-48ba-98f4-ddd2065cf822", "fields": {"membership_type": "member", "team": "prake", "user": "channy1030", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "3cc87e02-b232-4685-869c-4e7eda72eb9e", "fields": {"membership_type": "member", "team": "prake", "user": "smj91011", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "4524a1cb-1def-43a5-ad0e-8fc551edd965", "fields": {"membership_type": "admin", "team": "prake", "user": "rbtmd1010", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}},
         {"model": "user.membership", "pk": "54c75240-28eb-475f-8d13-de6e5780cb67", "fields": {"membership_type": "member", "team": "prake", "user": "molla", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "77d68b87-cce2-40d1-a71c-87b913fe0cdc", "fields": {"membership_type": "member", "team": "prake", "user": "hockey89", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "8d42916c-07c5-41a6-8a50-7a66c27c4ff2", "fields": {"membership_type": "member", "team": "prake", "user": "wjdtndls0416", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "944397d1-23c7-447d-b459-5a6bdc1197cc", "fields": {"membership_type": "member", "team": "prake", "user": "party07", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "e7b1e988-c3b4-4f8a-b9b6-906e9ba9e9f8", "fields": {"membership_type": "member", "team": "prake", "user": "insel0514", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "f760a9a1-4a27-473b-a8df-6bfb07ac09c8", "fields": {"membership_type": "member", "team": "prake", "user": "jaekigs", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}, {"model": "user.membership", "pk": "fe1639b1-a530-4a68-9123-1e95ac39106c", "fields": {"membership_type": "member", "team": "prake", "user": "skyorms2", "created_at": "2021-04-01T00:00:00Z", "modified_at": "2021-04-01T15:38:43.799Z"}}]

site = Site.objects.get(code="BJ")
for user in users:
  if "fields" not in user or "name" not in user["fields"]:
    continue
  try:
    name, bj_id = user["fields"]["name"], user["fields"]["BJ_id"]
    print(name, bj_id)
    user = User.objects.get(name=name)
    account = Account(user=user, site=site, login_id=bj_id)
    account.save()
  except Exception as e:
    print(traceback.format_exc())
